---
layout: default
---

<h2>Compose Laravel</h2>
<p>&nbsp;</p>
<div class="row">
  <div class="col-md-6">
    <img src="/images/laravel.png" width="150px">
  </div>
  <div class="col-md-6 text-right">
    <dl>
      <dt>Project website:</dt>
      <dd><a href="https://www.laravel.com" target="_blank">laravel.com</a></dd>
      <dt>Github:</dt>
      <dd><a href="https://github.com/dockerwest/compose-laravel" target="_blank">https://github.com/dockerwest/compose-laravel</a>
      </dd>
    </dl>
  </div>
</div>

<div class="row">
  <div class="col-md-2">
    <img src="/images/php.png" width="50px" data-toggle="tooltip" data-placement="bottom" title="PHP">
  </div>
  <div class="col-md-2">
    <img src="/images/mysql.png" width="50px" data-toggle="tooltip" data-placement="bottom"
         title="Mysql">
  </div>
  <div class="col-md-2">
    <img src="/images/nginx.png" width="50px" data-toggle="tooltip" data-placement="bottom"
         title="Nginx">
  </div>
  <div class="col-md-2">
    <img src="/images/redis.png" width="50px" data-toggle="tooltip" data-placement="bottom"
         title="Redis">
  </div>
  <div class="col-md-2">
    <img src="/images/mailcatcher.png" height="25px" data-toggle="tooltip" data-placement="bottom"
         title="Mailcatcher">
  </div>
</div>
<div class="row">&nbsp;</div>

<div class="row">
  <div class="col-md-12">
    <h3>Getting started</h3>
    <p>Make sure you first followed the <a href="{{ site.baseurl }}/compose-environments">global getting started steps</a>.</p>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <h4>1. Clone the git repository next to your project folder.</h4>
    <pre>$ git clone git@github.com:dockerwest/compose-laravel.git</pre>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <h4>2. Copy .env-sample to .env and update accordingly</h4>
    <p>Set the relative path to the folder where your project is located:</p>
    <pre>APPLICATION=../application</pre>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <h4>3. Start the project-specific environment</h4>
    <pre>$ ./environment</pre>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <h4>4. Start the docker environment</h4>
    <pre>$ run up</pre>
    <p class="help-block">The helper command <code>run</code> is an alias to <code>docker-compose</code>, specific
      for the current environment.</p>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <h4>5. Access your project in the browser</h4>
    <p>This can be done in one of the following ways:</p>
    <ul>
      <li>Use <a href="https://github.com/BlackIkeEagle/docker-developer-dns">Docker Developer DNS</a>
        <br>This way you can access the environment by browsing <code>application.docker</code> in your browser.
      </li>
      <li>Use <a href="https://github.com/jwilder/nginx-proxy">Nginx Proxy</a>
        <br>This way you can access the environment by browsing <code>application.docker</code> in your browser.
      </li>
      <li>Add <code>ports</code> section to the nginx config in the docker-composer.yml file:
        <pre>
nginx:
    ports:
        - "80:80"
            </pre>
        This way you can access the environment by browsing <code>localhost:80</code> in your browser.
      </li>
    </ul>
  </div>
</div>


<h3>What's in the box?</h3>
<p>
  The following technologies are out-of-the-box available in this environment.<br>
  Click on one of the names for more information.
</p>

<div class="panel-group" id="techs" role="tablist" aria-multiselectable="true">
  <div class="card mb-1">
    <div class="card-header" role="tab" id="techHeading1">
      <a role="button" data-toggle="collapse" data-parent="#techs" href="#tech1"
         aria-expanded="true" aria-controls="tech1">
        php-laravel
      </a>
      <span class="float-right">
      <span class="badge badge-primary" data-toggle="tooltip" data-placement="top"
            title="Available version">5.6</span>
      <span class="badge badge-primary" data-toggle="tooltip" data-placement="top"
            title="Available version"></span>
      <span class="badge badge-success" data-toggle="tooltip" data-placement="top"
            title="Default version">7.1</span>
      <span class="badge badge-primary" data-toggle="tooltip" data-placement="top"
            title="Available version">7.2</span>
    </span>
    </div>
    <div id="tech1" class="card-body collapse" role="tabpanel" aria-labelledby="techHeading1">
      <div class="panel-body">
        <p>
          <a href="https://github.com/dockerwest/compose-laravel">php-laravel</a> image named
          <code>application</code>,
          which mounts the <code>APPLICATION</code> path to the image and links to mysql, redis and
          mailcatcher.
        </p>
        <p>You can access the php-cli using the <code>php</code> helper. (see below)</p>
        <p>
          The following packages are installed: php-gd php-mysql php-mcrypt php-sqlite3
          php-bz2 php-xml php-mbstring php-zip php-redis
          php-imagick php-json php-bcmath php-intl
        </p>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="techHeading2">
      <a role="button" data-toggle="collapse" data-parent="#techs" href="#tech2"
         aria-expanded="true" aria-controls="tech2">
        nginx-laravel
      </a>
      <span class="float-right">
        <span class="badge badge-success" data-toggle="tooltip" data-placement="top" title="Default version">2-stable</span>
        <span class="badge badge-primary" data-toggle="tooltip" data-placement="top" title="Available version">2-mainline</span>
        <span class="badge badge-primary" data-toggle="tooltip" data-placement="top" title="Available version">3-stable</span>
        <span class="badge badge-primary" data-toggle="tooltip" data-placement="top" title="Available version">3-mainline</span>
      </span>
    </div>
    <div id="tech2" class="card-body collapse" role="tabpanel" aria-labelledby="techHeading2">
      <div class="panel-body">
        <p>
          <a href="https://github.com/dockerwest/nginx-laravel">nginx-laravel</a> image named
          <code>nginx</code>,
          which mounts the <code>APPLICATION</code> path to the image and links to application.
        </p>
        <p>Please note that there is a different vhost between laravel 2 and laravel 3.</p>
        <p>
          This nginx container is available at <code>application.docker</code> and
          <code>www.application.docker</code>
          through
        <pre>- VIRTUAL_HOST=${BASEHOST:-application.docker},www.${BASEHOST:-application.docker}</pre>
        </p>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="techHeading3">
      <a role="button" data-toggle="collapse" data-parent="#techs" href="#tech3"
         aria-expanded="true" aria-controls="tech3">
        redis
      </a>
      <span class="float-right">
        <span class="badge badge-success">alpine</span>
      </span>
    </div>
    <div id="tech3" class="card-body collapse" role="tabpanel" aria-labelledby="techHeading3">
      <div class="panel-body">
        <p>
          <a href="https://hub.docker.com/_/redis/">Redis</a> image named <code>redis</code>.
        </p>
        <p>
          This redis container is available at <code>redis.application.docker</code> through
        <pre>- DOMAIN_NAME=redis.${BASEHOST:-application.docker}</pre>
        </p>
        <p>
          Connection settings:<br>
        <pre>host: redis</pre>
        </p>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="techHeading4">
      <a role="button" data-toggle="collapse" data-parent="#techs" href="#tech4"
         aria-expanded="true" aria-controls="tech4">
        mysql
      </a>
      <span class="float-right">
        <span class="badge badge-success">latest</span>
      </span>
    </div>
    <div id="tech4" class="card-body collapse" role="tabpanel" aria-labelledby="techHeading4">
      <div class="panel-body">
        <p>
          <a href="https://hub.docker.com/_/mysql/">Mysql</a> image named <code>mysql</code>.
        </p>
        <p>
          The mysql root password is provided through the environment variable in the <code>.env</code> file
          through:
        <pre>- MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD:-toor}</pre>
        </p>
        <p>
          This mysql container is available at <code>mysql.application.docker</code> through
        <pre>- DOMAIN_NAME=mysql.${BASEHOST:-application.docker}</pre>
        </p>
        <p>You should first create a new database through the <code>create_db</code> helper command (see below).
          <br>
          Connection settings:
        <pre>
host: mysql
port: 3306
user: root
password: toor  (unless changed in .env file)</pre>
        </p>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="techHeading5">
      <a role="button" data-toggle="collapse" data-parent="#techs" href="#tech5"
         aria-expanded="true" aria-controls="tech5">
        mailcatcher
      </a>
      <span class="float-right">
        <span class="badge badge-success">latest</span>
      </span>
    </div>
    <div id="tech5" class="card-body collapse" role="tabpanel" aria-labelledby="techHeading5">
      <div class="panel-body">
        <p>
          <a href="https://hub.docker.com/r/schickling/mailcatcher/">Mailcatcher</a> container named
          <code>mailcatcher</code>.
        </p>
        <p>
          This mailcatcher container is available at <code>mailcatcher.application.docker:1080</code> through
        <pre>- DOMAIN_NAME=mailcatcher.${BASEHOST:-application.docker}</pre>
        </p>
        <p>
          SMTP settings for your application are:<br>
        <pre>
host: mailcatcher
port: 1025</pre>
        </p>
      </div>
    </div>
  </div>
</div>

<h3 class="pt-3">Available helper commands</h3>
<p>Click on one of the commands for more info and an example.</p>
<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
  <div class="card mb-1">
    <div class="card-header" role="tab" id="headingOne">
      <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne"
         aria-expanded="true" aria-controls="collapseOne">
        run
      </a>
    </div>
    <div id="collapseOne" class="card-body collapse" role="tabpanel" aria-labelledby="headingOne">
      <div class="panel-body">
        Run docker-compose for the current project, setting the project name to the BASEHOST variable from the
        .env file
        <br><br>
        <pre>$ run up</pre>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="heading10">
      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse10"
         aria-expanded="false" aria-controls="collapse10">
        php
      </a>
    </div>
    <div id="collapse10" class="card-body collapse" role="tabpanel" aria-labelledby="heading10">
      <div class="panel-body">
        <p>Execute the <a href="http://php.net/">php</a> command inside the running php container, or inside a
          php-laravel container if none is running.</p>
        <p>
          The working directory will be the current directory you are executing this command from.
        </p>
        eg.
        <pre>$ php -v</pre>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="headingTwo">
      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo"
         aria-expanded="false" aria-controls="collapseTwo">
        composer
      </a>
    </div>
    <div id="collapseTwo" class="card-body collapse" role="tabpanel" aria-labelledby="headingTwo">
      <div class="panel-body">
        <p>Run the <a href="https://getcomposer.org/">composer</a> command inside the php docker container.
          The working directory will be the current directory you are executing this command from.
        </p>
        <p>
          Your $HOME/.ssh and $HOME/.composer folders wil be mounted inside this container to enable you to
          make use of your ssh keys and composer cache.
        </p>

        eg.
        <pre>$ composer require package_name</pre>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="headingThree">
      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree"
         aria-expanded="false" aria-controls="collapseThree">
        create_db
      </a>
    </div>
    <div id="collapseThree" class="card-body collapse" role="tabpanel" aria-labelledby="headingThree">
      <div class="panel-body">
        <p>Create a new database inside the running mysql container with the given name (eg. 'laravel') and
          'DEFAULT CHARSET utf8'.
        </p>

        eg.
        <pre>$ create_db laravel</pre>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="heading4">
      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse4"
         aria-expanded="false" aria-controls="collapse4">
        mysql
      </a>
    </div>
    <div id="collapse4" class="card-body collapse" role="tabpanel" aria-labelledby="heading4">
      <div class="panel-body">
        <p>Execute a mysql command inside the running mysql container as the root user.</p>

        eg.
        <pre>$ mysql "SELECT * FROM table_name;"</pre>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="heading5">
      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse5"
         aria-expanded="false" aria-controls="collapse5">
        mysqldump
      </a>
    </div>
    <div id="collapse5" class="card-body collapse" role="tabpanel" aria-labelledby="heading5">
      <div class="panel-body">
        <p>Execute the mysqldump command inside the running mysql container as the root user.</p>

        eg.
        <pre>$ mysqldump db_name > export_file_name.sql</pre>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="heading6">
      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse6"
         aria-expanded="false" aria-controls="collapse6">
        mysqlimport
      </a>
    </div>
    <div id="collapse6" class="card-body collapse" role="tabpanel" aria-labelledby="heading6">
      <div class="panel-body">
        <p>Import a given mysql file into a given database, inside the running mysql container as the root
          user.</p>

        eg.
        <pre>$ mysqlimport db_name import_file_name.sql</pre>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="heading7">
      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse7"
         aria-expanded="false" aria-controls="collapse7">
        node
      </a>
    </div>
    <div id="collapse7" class="card-body collapse" role="tabpanel" aria-labelledby="heading7">
      <div class="panel-body">
        <p>Execute the <a href="https://nodejs.org">nodejs</a> command inside a <a
            href="https://github.com/dockerwest/nodejs">nodejs container</a>.
          The working directory will be the current directory you are executing this command from.</p>

        eg.
        <pre>$ node js_file.js</pre>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="heading8">
      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse8"
         aria-expanded="false" aria-controls="collapse8">
        npm
      </a>
    </div>
    <div id="collapse8" class="card-body collapse" role="tabpanel" aria-labelledby="heading8">
      <div class="panel-body">
        <p>Execute the <a href="https://www.npmjs.com/">npm</a> command inside a <a
            href="https://github.com/dockerwest/nodejs">nodejs container</a>.</p>
        <p>
          The working directory will be the current directory you are executing this command from.
          Your $HOME/.ssh and $HOME/.npm folders wil be mounted inside this container to enable you to make
          use of your ssh keys and npm cache.</p>

        eg.
        <pre>$ npm install package_name</pre>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="heading9">
      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse9"
         aria-expanded="false" aria-controls="collapse9">
        yarn
      </a>
    </div>
    <div id="collapse9" class="card-body collapse" role="tabpanel" aria-labelledby="heading9">
      <div class="panel-body">
        <p>Execute the <a href="https://yarnpkg.com">yarn</a> command inside a <a
            href="https://github.com/dockerwest/nodejs">nodejs container</a>.
        </p>
        <p>
          The working directory will be the current directory you are executing this command from.
          Your $HOME/.ssh and $HOME/.npm folders wil be mounted inside this container to enable you to make
          use of
          your ssh keys and npm cache.</p>

        eg.
        <pre>$ yarn add package_name</pre>
      </div>
    </div>
  </div>
  <div class="card mb-1">
    <div class="card-header" role="tab" id="heading11">
      <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse11"
         aria-expanded="false" aria-controls="collapse11">
        redis-cli
      </a>
    </div>
    <div id="collapse11" class="card-body collapse" role="tabpanel" aria-labelledby="heading11">
      <div class="panel-body">
        <p>Execute the <a href="https://redis.io/topics/rediscli">redis-cli</a> command in the running redis
          container.</p>

        eg.
        <pre>$ redis-cli flushall</pre>

      </div>
    </div>
  </div>
</div>
